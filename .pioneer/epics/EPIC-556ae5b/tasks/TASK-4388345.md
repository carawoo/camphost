---
id: TASK-4388345
title: 설정 페이지 - 숯불 예약 기능 ON/OFF 토글 및 시간대 옵션 관리 UI
type: task
task_type: feat
status: DONE
priority: high
created: 2025-10-30T12:17:16Z
updated: 2025-10-30T12:26:28Z
assignee: scrum-master
epic: EPIC-556ae5b
dependencies: []
---

# TASK-4388345: 설정 페이지 - 숯불 예약 기능 ON/OFF 토글 및 시간대 옵션 관리 UI

## Description

Admin 설정 페이지에 숯불 예약 기능의 ON/OFF 토글과 예약 가능 시간대 옵션을 관리할 수 있는 UI를 추가합니다.

## Requirements

- [x] 새 탭 "🔥 숯불 예약 설정" 추가 (기본 정보 탭 다음)
- [x] 토글 스위치로 기능 활성화/비활성화 제어
- [x] 활성화 시 시간대 옵션 관리 UI 표시
- [x] 시간대 옵션을 pill/chip 형태로 표시 (삭제 버튼 포함)
- [x] 새 시간대 옵션 추가 기능 (입력 + 추가 버튼)
- [x] 저장 버튼으로 Supabase에 데이터 저장
- [x] 성공/실패 토스트 메시지 표시

## Tech Spec

### 설계 개요
- **파일**: `app/admin/settings/page.tsx`
- **기능**: 숯불 예약 설정 UI 추가 (새 탭)
- **데이터베이스**: Supabase `campgrounds` 테이블
  - `enable_charcoal_reservation` (boolean)
  - `charcoal_time_options` (string[])

### UI 구조

**1. Tab 추가**
- TabType에 `'charcoal'` 추가
- 탭 버튼: "🔥 숯불 예약 설정"
- 위치: QR 체크인, 키오스크 안내문, 기본 정보 탭 사이

**2. State 변수**
```typescript
const [charcoalEnabled, setCharcoalEnabled] = useState(false)
const [charcoalTimeOptions, setCharcoalTimeOptions] = useState<string[]>(['오후 6시', '오후 7시', '오후 8시', '오후 9시'])
const [newTimeOption, setNewTimeOption] = useState('')
```

**3. 데이터 로딩**
- useEffect에서 Supabase 조회
- `enable_charcoal_reservation`, `charcoal_time_options` 로드
- 기본값: enabled=false, options=['오후 6시', '오후 7시', '오후 8시', '오후 9시']

**4. 저장 핸들러**
- `handleSaveCharcoalSettings()` 함수
- Supabase update: `enable_charcoal_reservation`, `charcoal_time_options`
- 성공/실패 토스트

**5. 시간대 관리**
- `handleAddTimeOption()`: 새 시간대 추가 (중복 체크)
- `handleDeleteTimeOption()`: 시간대 삭제

### API 설계
- **Load**: `GET /campgrounds?id=eq.{campgroundId}`
- **Save**: `PATCH /campgrounds?id=eq.{campgroundId}`
  - Body: `{ enable_charcoal_reservation, charcoal_time_options }`

### 스타일링
- 기존 설정 페이지의 Card, 버튼 스타일 재사용
- Toggle: checkbox input (width: 20px, height: 20px)
- Time pills: background #f3f4f6, border-radius 8px, 삭제 버튼 (×)
- Add input + button: flex gap 8px

### 에러 처리
- campgroundId 없으면 경고 토스트
- 시간대 입력 없으면 alert
- 중복 시간대 추가 시 alert
- Supabase 오류 시 토스트

## Work Log

### 2025-10-30 12:17 - scrum-master
- Task created

### 2025-10-30 12:30 - developer
- Tech Spec 작성 완료
- 구현 완료
  - TabType에 'charcoal' 추가
  - State 변수 추가 (charcoalEnabled, charcoalTimeOptions, newTimeOption)
  - useEffect에서 Supabase 데이터 로딩 추가
  - handleSaveCharcoalSettings(), handleAddTimeOption(), handleDeleteTimeOption() 함수 구현
  - 탭 네비게이션에 "🔥 숯불 예약 설정" 버튼 추가
  - 숯불 예약 설정 탭 UI 구현 (토글, 시간대 관리, 저장 버튼)
- 빌드: ✅ 성공 (TypeScript 타입 체크 통과)

## Status History

| Timestamp | Status | Agent | Note |
|-----------|--------|-------|------|
| 2025-10-30 12:17 | TODO | scrum-master | Task created |
| 2025-10-30 12:23 | IN_PROGRESS | developer | Starting settings page UI |
| 2025-10-30 12:25 | READY_FOR_TEST | test-engineer | Settings page UI implementation completed |
| 2025-10-30 12:26 | DONE | scrum-master | Settings page UI completed |

## Artifacts

- Branch: feature/EPIC-556ae5b
- Commit: (pending - Scrum Master will create)
- Files Modified:
  - app/admin/settings/page.tsx

## Checklist

- [x] Tech spec written (Developer)
- [x] Code implemented (Developer)
- [x] Type check passed
- [x] Lint passed
- [x] Build succeeded
- [ ] Tests written (Test Engineer)
- [ ] Tests passed


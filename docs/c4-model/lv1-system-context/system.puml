@startuml CampHost System Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

' ============================================================================
' Level 1: System Context Diagram
' ============================================================================
'
' CampHost 시스템의 전체 컨텍스트를 표현합니다.
' - 주요 사용자 (Actors)
' - 시스템 (CampHost)
' - 외부 시스템 (Supabase, Resend)
' - 사용자-시스템 간 관계
'
' 🔗 다음 레벨: lv2-containers/overview.puml
' ============================================================================

LAYOUT_WITH_LEGEND()

title System Context Diagram for CampHost

' ============================================================================
' Actors (사용자)
' ============================================================================

Person(superAdmin, "Super Admin", "시스템 전체 관리자\n- 캠핑장 CRUD\n- 시스템 모니터링\n- QR 코드 생성")

Person(campgroundAdmin, "Campground Admin", "캠핑장 사장님\n- 예약 관리\n- 매출 확인\n- 설정 관리")

Person(camper, "Camper", "캠핑 고객\n- 무인 체크인/체크아웃\n- 문의 작성")

' ============================================================================
' System (CampHost)
' ============================================================================

System(camphost, "CampHost", "캠핑장 무인 운영 자동화 시스템\n\n**기능:**\n- 무인 체크인/체크아웃\n- 예약 관리\n- QR 코드 생성\n- 매출 통계\n\n**기술 스택:**\n- Next.js 14.2\n- React 18.3\n- TypeScript 5.4")

' ============================================================================
' External Systems (외부 시스템)
' ============================================================================

System_Ext(supabase, "Supabase", "PostgreSQL 데이터베이스\n\n**역할:**\n- 캠핑장 정보 저장 (campgrounds)\n- 예약 정보 저장 (reservations)\n- 문의 정보 저장 (inquiries)\n- 대시보드 메트릭 뷰\n\n**접근 방식:**\n- REST API\n- Row Level Security (RLS)")

System_Ext(resend, "Resend", "이메일 발송 서비스\n\n**역할:**\n- 체크인 알림 이메일\n- 관리자 알림\n\n**API:**\n- REST API")

' ============================================================================
' Relationships (관계)
' ============================================================================

' Super Admin → CampHost
Rel(superAdmin, camphost, "캠핑장 관리", "HTTPS\n- 캠핑장 CRUD\n- 시스템 모니터링\n- QR 코드 생성")

' Campground Admin → CampHost
Rel(campgroundAdmin, camphost, "예약 관리", "HTTPS\n- 예약 조회/수정\n- 매출 확인\n- 문의 응답")

' Camper → CampHost
Rel(camper, camphost, "체크인/체크아웃", "HTTPS\n- 예약 검색\n- 체크인/체크아웃\n- 문의 작성")

' CampHost → Supabase
Rel(camphost, supabase, "데이터 읽기/쓰기", "REST API\n- SELECT\n- INSERT\n- UPDATE\n- DELETE")

' CampHost → Resend
Rel(camphost, resend, "알림 이메일 발송", "REST API\n- 체크인 알림\n- 관리자 알림")

' ============================================================================
' Notes
' ============================================================================

note right of camphost
  **주요 페이지:**
  - / (랜딩)
  - /super-admin/dashboard
  - /admin/*
  - /kiosk
end note

note right of supabase
  **주요 테이블:**
  - campgrounds
  - reservations
  - inquiries
  - dashboard_metrics (view)
end note

' ============================================================================
' 동기화 체크리스트
' ============================================================================
'
' □ 새로운 외부 시스템 추가 시
'   - System_Ext(...) 추가
'   - Rel(camphost, 외부시스템, ...) 추가
'
' □ 사용자 역할 변경 시
'   - Person(...) 설명 업데이트
'   - Rel(사용자, camphost, ...) 업데이트
'
' □ 시스템 기능 추가 시
'   - System(camphost, ...) 설명 업데이트

@enduml

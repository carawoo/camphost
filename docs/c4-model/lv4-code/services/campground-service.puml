@startuml Campground Service - Level 4 Code
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

' ============================================================================
' CampHost - Campground Service (Level 4: Code)
' ============================================================================
'
' ğŸ”— ì½”ë“œ ê²½ë¡œ:
'   - lib/campground.ts (ë‹¨ì¼ ìº í•‘ì¥ ì •ë³´ ê´€ë¦¬)
'   - lib/campgrounds.ts (ì „ì²´ ìº í•‘ì¥ ê´€ë¦¬ ë° Super Admin)
'
' ìº í•‘ì¥ ë°ì´í„° ê´€ë¦¬ ìœ í‹¸ë¦¬í‹°
' - localStorage ê¸°ë°˜ ìº í•‘ì¥ ë°ì´í„° CRUD
' - Super Admin ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬
' - ìº í•‘ì¥ ìƒíƒœ ê´€ë¦¬ ë° ê²€ìƒ‰
'
' ============================================================================

title Campground Service - Code Level

' ========== lib/campground.ts ==========

class CampgroundInfo {
  + id: string
  + name: string
  + contactPhone: string
  + contactEmail: string
  + address: string
  + description: string
}

note right of CampgroundInfo
  ë‹¨ì¼ ìº í•‘ì¥ ì •ë³´ íƒ€ì…
  (í˜„ì¬ ìš´ì˜ì¤‘ì¸ ìº í•‘ì¥ ì •ë³´)
end note

package "Campground Info Service" {
  class CampgroundInfoService <<utility>> {
    + {static} CAMPGROUND_STORAGE_KEY: string = 'odoichon_campground_info'
    + {static} defaultCampgroundInfo: CampgroundInfo
    --
    + {static} getCampgroundInfo(): CampgroundInfo
    + {static} saveCampgroundInfo(info: CampgroundInfo): void
    + {static} updateCampgroundInfo(updates: Partial<CampgroundInfo>): CampgroundInfo
  }
}

note bottom of CampgroundInfoService
  **ë‹¨ì¼ ìº í•‘ì¥ ì •ë³´ ê´€ë¦¬** (lib/campground.ts)

  - getCampgroundInfo(): localStorageì—ì„œ ìº í•‘ì¥ ì •ë³´ ë¡œë“œ
  - saveCampgroundInfo(): localStorageì— ìº í•‘ì¥ ì •ë³´ ì €ì¥
  - updateCampgroundInfo(): ìº í•‘ì¥ ì •ë³´ ë¶€ë¶„ ì—…ë°ì´íŠ¸

  **ê¸°ë³¸ê°’**: ì˜¤ë„ì´ì´Œ ìº í•‘ì¥ ì •ë³´
end note

' ========== lib/campgrounds.ts ==========

class Campground {
  + id: string
  + name: string
  + ownerName: string
  + ownerEmail: string
  + ownerPhone: string
  + contactPhone: string
  + contactEmail: string
  + address: string
  + description: string
  + status: 'active' | 'pending' | 'suspended' | 'terminated'
  + subscriptionPlan: 'basic' | 'premium' | 'enterprise'
  + createdAt: string
  + lastActiveAt: string
  + adminUrl: string
  + kioskUrl: string
}

note right of Campground
  ì „ì²´ ìº í•‘ì¥ ê´€ë¦¬ íƒ€ì…
  - status: ìº í•‘ì¥ ìƒíƒœ (active, pending, suspended, terminated)
  - subscriptionPlan: êµ¬ë… í”Œëœ
  - adminUrl/kioskUrl: ê° ìº í•‘ì¥ì˜ ê´€ë¦¬/í‚¤ì˜¤ìŠ¤í¬ URL
end note

class SuperAdmin {
  + id: string
  + username: string
  + email: string
  + isAuthenticated: boolean
}

note right of SuperAdmin
  ìŠˆí¼ ì–´ë“œë¯¼ ì •ë³´ íƒ€ì…
  - isAuthenticated: í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœ
end note

package "Campgrounds Management Service" {
  class CampgroundsService <<utility>> {
    + {static} CAMPGROUNDS_STORAGE_KEY: string = 'odoichon_campgrounds'
    + {static} SUPER_ADMIN_KEY: string = 'odoichon_super_admin'
    + {static} sampleCampgrounds: Campground[]
    + {static} defaultSuperAdmin: SuperAdmin
    --
    ' Super Admin ê´€ë ¨
    + {static} authenticateSuperAdmin(username: string, password: string): boolean
    + {static} getSuperAdminStatus(): SuperAdmin
    + {static} logoutSuperAdmin(): void
    --
    ' Campground CRUD
    + {static} getAllCampgrounds(): Campground[]
    + {static} saveCampgrounds(campgrounds: Campground[]): void
    + {static} addCampground(data: Omit<Campground, ...>): Campground
    + {static} updateCampground(id: string, updates: Partial<Campground>): boolean
    + {static} updateCampgroundStatus(id: string, status: Campground['status']): boolean
    + {static} deleteCampground(id: string): boolean
    --
    ' ê²€ìƒ‰ ë° í•„í„°ë§
    + {static} getCampgroundsByStatus(status: Campground['status']): Campground[]
    + {static} searchCampgrounds(query: string): Campground[]
  }
}

note bottom of CampgroundsService
  **ì „ì²´ ìº í•‘ì¥ ê´€ë¦¬** (lib/campgrounds.ts)

  **Super Admin ì¸ì¦**:
  - authenticateSuperAdmin(): í•˜ë“œì½”ë”©ëœ ìê²©ì¦ëª… ê²€ì¦ (admin/admin123)
  - getSuperAdminStatus(): í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
  - logoutSuperAdmin(): ë¡œê·¸ì•„ì›ƒ (localStorage ì‚­ì œ)

  **Campground CRUD**:
  - getAllCampgrounds(): ëª¨ë“  ìº í•‘ì¥ ì¡°íšŒ
  - addCampground(): ìƒˆ ìº í•‘ì¥ ì¶”ê°€ (Supabase UUID ë˜ëŠ” ìë™ ìƒì„±)
  - updateCampground(): ìº í•‘ì¥ ì •ë³´ ì—…ë°ì´íŠ¸
  - updateCampgroundStatus(): ìƒíƒœë§Œ ì—…ë°ì´íŠ¸ (lastActiveAt ìë™ ê°±ì‹ )
  - deleteCampground(): ìº í•‘ì¥ ì‚­ì œ

  **ê²€ìƒ‰ ë° í•„í„°ë§**:
  - getCampgroundsByStatus(): ìƒíƒœë³„ í•„í„°ë§
  - searchCampgrounds(): ì´ë¦„, ì†Œìœ ì, ì£¼ì†Œë¡œ ê²€ìƒ‰

  **ì´ˆê¸° ë°ì´í„°**: ì˜¤ë„ì´ì´Œ ìº í•‘ì¥(active), í…ŒìŠ¤íŠ¸ ìº í•‘ì¥(pending)
end note

' ì™¸ë¶€ ì˜ì¡´ì„±
database localStorage {
  frame "Campground Info Storage" {
    [odoichon_campground_info]
  }
  frame "Campgrounds Storage" {
    [odoichon_campgrounds]
  }
  frame "Super Admin Storage" {
    [odoichon_super_admin]
  }
}

database Supabase {
  frame "Remote Database" {
    [campgrounds table]
  }
}

' ê´€ê³„
CampgroundInfoService --> CampgroundInfo : uses
CampgroundInfoService --> localStorage : read/write\n(odoichon_campground_info)

CampgroundsService --> Campground : uses
CampgroundsService --> SuperAdmin : uses
CampgroundsService --> localStorage : read/write\n(odoichon_campgrounds,\nodoichon_super_admin)
CampgroundsService ..> Supabase : sync\n(UUID as id)

' ë ˆì´ì•„ì›ƒ
CampgroundInfo -[hidden]down- CampgroundInfoService
Campground -[hidden]down- CampgroundsService
SuperAdmin -[hidden]down- CampgroundsService

legend right
  **Level 4: Code - Campground Services**

  **íŒŒì¼**:
  - lib/campground.ts (ë‹¨ì¼ ìº í•‘ì¥ ì •ë³´)
  - lib/campgrounds.ts (ì „ì²´ ê´€ë¦¬ + Super Admin)

  **íƒ€ì…**: Utility Functions (Functional Programming)
  **ì €ì¥ì†Œ**: localStorage (Browser) + Supabase (Remote)

  **íŠ¹ì§•**:
  - ë‘ ê°œì˜ ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ (ë‹¨ì¼ vs ì „ì²´)
  - Super Admin ì¸ì¦ í†µí•©
  - Supabase UUID ë™ê¸°í™” ì§€ì›
  - ìº í•‘ì¥ ìƒíƒœ ê´€ë¦¬ (4ë‹¨ê³„)
  - êµ¬ë… í”Œëœ ê´€ë¦¬ (3ë‹¨ê³„)

  **ì‚¬ìš© ì˜ˆì‹œ**:
  ```typescript
  // Super Admin ë¡œê·¸ì¸
  const success = authenticateSuperAdmin('admin', 'admin123')

  // ëª¨ë“  ìº í•‘ì¥ ì¡°íšŒ
  const campgrounds = getAllCampgrounds()

  // ìƒˆ ìº í•‘ì¥ ì¶”ê°€ (Supabase UUID í¬í•¨)
  const newCampground = addCampground({
    id: 'uuid-from-supabase',
    name: 'ìƒˆë¡œìš´ ìº í•‘ì¥',
    ownerName: 'ìµœì‚¬ì¥',
    ownerEmail: 'choi@example.com',
    ownerPhone: '010-3333-4444',
    contactPhone: '010-3333-4444',
    contactEmail: 'contact@newcamp.com',
    address: 'ì œì£¼ë„ ì œì£¼ì‹œ',
    description: 'ë°”ë‹¤ì™€ í•¨ê»˜í•˜ëŠ” ìº í•‘',
    status: 'pending',
    subscriptionPlan: 'basic'
  })

  // ìƒíƒœ ì—…ë°ì´íŠ¸
  updateCampgroundStatus('uuid-from-supabase', 'active')

  // ê²€ìƒ‰
  const results = searchCampgrounds('ì œì£¼')
  ```
end legend

@enduml
